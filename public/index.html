<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello!</title>
    <meta name="description" content="description"/>
    <meta name="author" content="author" />
    <meta name="keywords" content="keywords" />
    <style type="text/css">
        *,*::before,*::after{box-sizing:border-box;}*{margin:0;}body{line-height:1.5;-webkit-font-smoothing:antialiased;}img,picture,video,canvas,svg{display:block;max-width:100%;}input,button,textarea,select{font:inherit;}p,h1,h2,h3,h4,h5,h6{overflow-wrap:break-word;}#root,#__next{isolation:isolate;}

        @font-face {
            font-family: 'FucXed Caps Latin';
            src: url('fonts/fucxedcapslatin.otf') format('opentype'),
                url('fonts/fucxedcapslatin.woff') format('woff'),
                url('fonts/fucxedcapslatin.woff2') format('woff2');
        }

        .font {
            font-family: 'FucXed Caps Latin';
        }
    </style>

    <style>
        #canvas-container {
            overflow: hidden;
            width: 100%; /* Make sure it takes the full width of the screen */
        }

        #canvas {
            width: 100%; /* Set the canvas width to 100% of its container */
            height: auto; /* Automatically adjust the height to maintain aspect ratio */
        }
    </style>    
  </head>
  <body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js" integrity="sha256-xUHvBjJ4hahBW8qN9gceFBibSFUzbe9PNttUvehITzY=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/underscore@1.13.6/underscore-min.min.js"></script>



    <h1 class="font">Referred by <span id="referredby"></span></h1>

    <h1></h1>

    <div id="qrcode" style="opacity: 0.5"></div>

    <div id="canvas-container">
        <canvas id="canvas" width="2048" height="2048"></canvas>
    </div>

    


    <script>
        $(function() {

        // REFERRAL CODE
        const pathname = window.location.pathname;
        console.log("Pathname: " + pathname);
        $("#referredby").text(pathname.replace("/", ""));


        // DRAW MEME
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        var img = new Image();
        img.src = 'toxic-system-peaceful-evolution-resized.png';
        img.onload = () => ctx.drawImage(img, 0, 0)

        var img2 = new Image();
        img2.src = 'gemes-rules.png';
        img2.onload = () => ctx.drawImage(img2, 0, 1024)

        // BLACK BACKGROUND FOR QR CODE
        ctx.fillStyle = 'black';
        ctx.fillRect(1024, 0, 1024, 1024);

        ctx.fillStyle = 'white';
        ctx.fillRect(1024 + 70, 70, 1024 - 140, 1024 - 140);

        // QR CODE
        qrcodeGLOBAL = new QRCode(document.getElementById("qrcode"), {
            text: "http://jindo.dev.naver.com/collie",
            width: 1024,
            height: 1024,
            correctLevel : QRCode.CorrectLevel.H
        });

        const generatedQRcode = $("#qrcode").find("img")[0];
        generatedQRcode.onload = function() {
            ctx.drawImage(generatedQRcode, 1024 + 140, 140, 1024 - 280, 1024 - 280);
        };


    });
    </script>

  </body>
</html>